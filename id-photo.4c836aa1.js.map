{"version":3,"sources":["index.js"],"names":["container","document","querySelector","player","playerView","canvas","context","getContext","captureButton","startButton","start","navigator","alert","style","display","window","scrollTo","mediaDevices","getUserMedia","video","facingMode","width","height","then","stream","srcObject","console","log","capturePhoto","videoWidth","videoHeight","drawImage","onResize","innerHeight","innerWidth","opacity","addEventListener"],"mappings":";AAAA,IAAMA,EAAYC,SAASC,cAAc,cACnCC,EAASF,SAASC,cAAc,WAChCE,EAAaH,SAASC,cAAc,gBACpCG,EAASJ,SAASC,cAAc,WAChCI,EAAUD,EAAOE,WAAW,MAC5BC,EAAgBP,SAASC,cAAc,YACvCO,EAAcR,SAASC,cAAc,UAE3C,SAASQ,IACa,iBAAkBC,WAGhCC,MAAM,wCAWVH,EAAYI,MAAMC,QAAU,OAC5BV,EAAWS,MAAMC,QAAU,QAC3BC,OAAOC,SAAS,EAAG,GAEnBL,UAAUM,aAAaC,aAZH,CAChBC,MAAO,CACHC,WAAY,cACZC,MAAO,IACPC,OAAQ,OASXC,KAAK,SAACC,GACHrB,EAAOsB,UAAYD,EACnBE,QAAQC,IAAIH,KAIxB,SAASI,IACLvB,EAAOgB,MAAQlB,EAAO0B,WACtBxB,EAAOiB,OAASnB,EAAO2B,YAEvBxB,EAAQyB,UAAU5B,EAAQ,EAAG,EAAGA,EAAO0B,WAAY1B,EAAO2B,aAE1DlB,MAAMT,EAAO0B,WAAa,IAAM1B,EAAO2B,aAG3C,SAASE,IACLhC,EAAUa,MAAMS,OAAYP,GAAAA,OAAAA,OAAOkB,YAAnC,MACIlB,OAAOkB,YAAclB,OAAOmB,WAC5BjC,SAASC,cAAc,iBAAiBW,MAAMsB,QAAU,IAExDlC,SAASC,cAAc,iBAAiBW,MAAMsB,QAAU,IAKhE1B,EAAY2B,iBAAiB,QAAS1B,GACtCF,EAAc4B,iBAAiB,QAASR,GAGxCb,OAAOqB,iBAAiB,SAAUJ,GAClCA","file":"id-photo.4c836aa1.js","sourceRoot":"..","sourcesContent":["const container = document.querySelector('.container');\nconst player = document.querySelector('#player');\nconst playerView = document.querySelector('.player-view');\nconst canvas = document.querySelector('#canvas');\nconst context = canvas.getContext('2d');\nconst captureButton = document.querySelector('#capture');\nconst startButton = document.querySelector('#start');\n\nfunction start() {\n    const supported = 'mediaDevices' in navigator;\n\n    if (!supported) {\n        alert('Nie można uzyskać dostępu do kamery.');\n    }\n\n    const constraints = {\n        video: {\n            facingMode: 'environment',\n            width: 5000,\n            height: 4000,\n        },\n    };\n\n    startButton.style.display = 'none';\n    playerView.style.display = 'block';\n    window.scrollTo(0, 1);\n    // Attach the video stream to the video element and autoplay.\n    navigator.mediaDevices.getUserMedia(constraints)\n        .then((stream) => {\n            player.srcObject = stream;\n            console.log(stream)\n        });\n}\n\nfunction capturePhoto() {\n    canvas.width = player.videoWidth;\n    canvas.height = player.videoHeight;\n\n    context.drawImage(player, 0, 0, player.videoWidth, player.videoHeight);\n\n    alert(player.videoWidth + ' ' + player.videoHeight);\n}\n\nfunction onResize() {\n    container.style.height = `${window.innerHeight}px`;\n    if (window.innerHeight > window.innerWidth) {\n        document.querySelector('.rotate-phone').style.opacity = '1';\n    } else {\n        document.querySelector('.rotate-phone').style.opacity = '0';\n    }\n}\n\n// bind events\nstartButton.addEventListener('click', start);\ncaptureButton.addEventListener('click', capturePhoto);\n\n// only way to fix mobile safari window height changes :/\nwindow.addEventListener('resize', onResize);\nonResize();"]}