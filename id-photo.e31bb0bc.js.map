{"version":3,"sources":["index.js"],"names":["container","document","querySelector","player","playerView","canvas","context","getContext","captureButton","startButton","start","supported","navigator","alert","constraints","video","facingMode","width","height","style","display","window","scrollTo","mediaDevices","getUserMedia","then","stream","srcObject","console","log","capturePhoto","videoWidth","videoHeight","drawImage","onResize","innerHeight","innerWidth","opacity","resetCanvas","e","stopPropagation","addEventListener"],"mappings":"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","file":"id-photo.e31bb0bc.js","sourceRoot":"..","sourcesContent":["const container = document.querySelector('.container');\nconst player = document.querySelector('#player');\nconst playerView = document.querySelector('.player-view');\nconst canvas = document.querySelector('#canvas');\nconst context = canvas.getContext('2d');\nconst captureButton = document.querySelector('#capture');\nconst startButton = document.querySelector('#start');\n\nfunction start() {\n    const supported = 'mediaDevices' in navigator;\n\n    if (!supported) {\n        alert('Nie można uzyskać dostępu do kamery.');\n    }\n\n    const constraints = {\n        video: {\n            facingMode: 'environment',\n            width: 5000,\n            height: 4000,\n        },\n    };\n\n    startButton.style.display = 'none';\n    playerView.style.display = 'block';\n    window.scrollTo(0, 1);\n    // Attach the video stream to the video element and autoplay.\n    navigator.mediaDevices.getUserMedia(constraints)\n        .then((stream) => {\n            player.srcObject = stream;\n            console.log(stream)\n        });\n}\n\nfunction capturePhoto() {\n    canvas.width = player.videoWidth;\n    canvas.height = player.videoHeight;\n\n    context.drawImage(player, 0, 0, player.videoWidth, player.videoHeight);\n\n    alert(player.videoWidth + ' ' + player.videoHeight);\n}\n\nfunction onResize() {\n    container.style.height = `${window.innerHeight}px`;\n    if (window.innerHeight > window.innerWidth) {\n        document.querySelector('.rotate-phone').style.opacity = '1';\n    } else {\n        document.querySelector('.rotate-phone').style.opacity = '0';\n    }\n}\n\nfunction resetCanvas(e) {\n    e.stopPropagation();\n    canvas.width = 0;\n    canvas.height = 0;\n}\n\n// bind events\nstartButton.addEventListener('click', start);\ncaptureButton.addEventListener('click', capturePhoto);\ncanvas.addEventListener('click', resetCanvas);\n\n// only way to fix mobile safari window height changes :/\nwindow.addEventListener('resize', onResize);\nonResize();"]}